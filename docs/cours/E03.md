# API E08 - Bundler `vite`

```
=== Matin (COURS) + Aprem (COURS) ===

- Correction
  - (DELETE) Suppression d'une liste
  - (PATCH) Modification du nom d'une liste

- Compléments
  - Bundlers (`vite`)
  - Drag & Drop (`sortablejs`)
  - Toast de succès (`bulma-toast` & `animate.css`)
```

## Sommaire

- [Bundlers (`vite`)](#bundlers-vite)

## Cours

### Bundlers (`vite`)

Un _bundler_ est un outil qui permet de transformer des fichiers sources (JS, CSS, etc...) en un seul fichier final. Cela permet de gérer les dépendances entre les fichiers, de les minifier, de les transpiler, etc...

Nous allons voir un _bundler_ moderne, `vite`, qui est très performant et qui permet de travailler avec des modules ECMAScript natifs (ESM). Mais il en existe d'autres, comme `webpack`, `parcel`, `rollup`, etc...

#### Installation

##### Initialisation de npm

Dans un premier temps, nous allons initialiser un projet `npm` dans le dossier de notre projet.

```sh
npm init
```

##### Installation de `vite`

Ensuite, nous allons installer `vite` en tant que dépendance de développement.

```sh
npm install --save-dev vite
```

#### Utilisation

L'une des forces de `vite` est qu'il ne nécessite pas de configuration supplémentaire pour fonctionner. `vite` est capable de détecter automatiquement les fichiers sources pour travailler avec.

Ajoutons quelques scripts dans notre fichier `package.json` pour commencer à utiliser `vite`.

```json
"scripts": {
  "dev": "vite",
  "build": "vite build",
  "preview": "vite preview"
}
```

- `npm run dev` : Lance un serveur de développement avec hot-reload (c'est l'equivalent du Live Server de VSCode mais en plus puissant)

- `npm run build` : Crée une version de production de notre application dans un dossier `dist`. Il s'agit d'un dossier prêt à être déployé sur un serveur avec du code optimisé (principallement la minimification du code mais aussi la suppression des logs de débogage, etc...). Attention, il faut
  penser à ajouter le dossier `dist` dans le `.gitignore` pour ne pas le versionner.

- `npm run preview` : Lance un serveur de prévisualisation de notre application dans le dossier `dist`. Cela permet de vérifier que notre application fonctionne correctement avant de la déployer sur un serveur.\*

### Dataset

Souvent, en javascript il peut etre pratique de stocker des données dans des elements du DOM, pour pouvoir les exploité plus tard. (Par exemple, stocké l'id de la liste qui à déclanché l'ouverture d'une modal).

Pour cela, on peut utiliser les dataset qui sont un mecanisme natif de javascript qui permet de stocker des données dans des attributs HTML.

En pratique :

Ajouter de la donnée à un element :

```js
const element = document.querySelector(".my-element");
element.dataset.myData = "Hello";
```

Récupérer de la donnée d'un element :

```js
const element = document.querySelector(".my-element");
console.log(element.dataset.myData); // Hello
```
